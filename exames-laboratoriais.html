<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Exames - Lar Padre Euclides</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="carregarResidentes()">
    <div class="navbar">
        <img src="logo.png" height="50" style="margin-right:20px;">
        <a href="index.html">Avalia√ß√£o</a>
        <a href="exames-laboratoriais.html">Exames</a>
    </div>

    <div class="container">
        <header><h1>Registo Laboratorial Completo</h1></header>
        
        <div class="grid">
            <div><label>Residente</label><select id="selRes"><option value="">-- Escolher --</option></select></div>
            <div><label>Data</label><input type="date" id="dataExame"></div>
        </div>

        <form id="formExames">
            <div class="cat-header">Hemograma Completo</div>
            <div class="exam-row"><div>Eritr√≥citos / Hemoglobina / HT</div><input type="text" id="hemo"><span class="ref-text">Ref: M:13.5-17.5 | F:12-15.5 g/dL</span></div>
            <div class="exam-row"><div>Leuc√≥citos / Plaquetas / Diferencial</div><input type="text" id="leuco"><span class="ref-text">Ref: 4k-11k | 150k-450k</span></div>
            
            <div class="cat-header">Prote√≠nas e Inflama√ß√£o</div>
            <div class="exam-row"><div>Albumina S√©rica + PCR</div><input type="text" id="alb_pcr"><span class="ref-text">Ref: Alb >3.5 | PCR <0.5</span></div>
            <div class="exam-row"><div>Prote√≠nas Totais e Fra√ß√µes</div><input type="text" id="prot_totais"><span class="ref-text">Ref: 6.0 - 8.0 g/dL</span></div>

            <div class="cat-header">Metabolismo e Renal</div>
            <div class="exam-row"><div>Glicemia Jejum / HbA1c</div><input type="text" id="glic"><span class="ref-text">Ref: 70-99 mg/dL | HbA1c <6.5%</span></div>
            <div class="exam-row"><div>Ureia / Creatinina</div><input type="text" id="renal"><span class="ref-text">Ref: U:15-45 | C:0.6-1.3</span></div>

            <div class="cat-header">Lipograma</div>
            <div class="exam-row"><div>Colesterol Total / Fra√ß√µes (HDL/LDL/VLDL)</div><input type="text" id="colest"><span class="ref-text">Ref: CT <190 | HDL >40</span></div>
            <div class="exam-row"><div>Triglicer√≠deos</div><input type="text" id="trig"><span class="ref-text">Ref: <150 mg/dL</span></div>

            <div class="cat-header">Vitaminas e Minerais</div>
            <div class="exam-row"><div>Vit D / B12 / √Åcido F√≥lico</div><input type="text" id="vits"><span class="ref-text">Ref: D >30ng | B12 >200pg</span></div>
            <div class="exam-row"><div>Ferritina / Ferro S√©rico</div><input type="text" id="ferro"><span class="ref-text">Ref: F:20-250 ng/mL</span></div>
            <div class="exam-row"><div>Zinco, S√≥dio, Pot√°ssio, F√≥sforo, C√°lcio, Mg</div><input type="text" id="minerais"><span class="ref-text">Eletrolitos e Oligoelementos</span></div>

            <div class="cat-header">F√≠gado, Tireoide e Urina</div>
            <div class="exam-row"><div>TGO / TGP / TSH</div><input type="text" id="hepato_tsh"><span class="ref-text">TSH: 0.4 - 4.5 mIU/L</span></div>
            <div class="exam-row"><div>EAS (Urina Tipo 1)</div><input type="text" id="eas"><span class="ref-text">pH: 5.0 - 7.0</span></div>
        </form>

        <button class="btn-save" onclick="salvarExames()">üíæ GUARDAR EXAMES</button>
    </div>

    <script src="app.js"></script>
    <script>
        function carregarResidentes() {
            const b = obterBanco();
            const s = document.getElementById("selRes");
            Object.keys(b).sort().forEach(n => { s.innerHTML += `<option value="${n}">${n}</option>`; });
        }
        function salvarExames() {
            const n = document.getElementById("selRes").value;
            if(!n) return alert("Selecione!");
            const dados = { data: document.getElementById("dataExame").value };
            document.querySelectorAll("#formExames input").forEach(i => dados[i.id] = i.value);
            salvarExame(n, dados);
            alert("Exames de " + n + " guardados!");
        }
    </script>
</body>
</html>
