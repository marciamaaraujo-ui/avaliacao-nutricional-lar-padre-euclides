<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <title>Exames - Lar Padre Euclides</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .exam-row { display: grid; grid-template-columns: 1.5fr 1fr 1.5fr; gap: 10px; padding: 10px 0; border-bottom: 1px solid #eee; }
        .cat { background: var(--primary-color); color: white; padding: 5px 10px; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body onload="carregarNomes()">
    <div class="container">
        <header><h1>Registo de Exames Laboratoriais</h1></header>
        
        <section>
            <select id="selResidente"><option value="">-- Selecionar Residente --</option></select>
            <input type="date" id="dataExame" style="margin-top:10px;">
        </section>

        <form id="formExames">
            <div class="cat">Hemograma</div>
            <div class="exam-row"><div>Eritr√≥citos / Hemoglobina</div><input type="text" id="hemo"><span>M:13.5-17.5 | F:12-15.5 g/dL</span></div>
            <div class="exam-row"><div>Leuc√≥citos / Plaquetas</div><input type="text" id="leuco"><span>4k-11k | 150k-450k</span></div>
            
            <div class="cat">Prote√≠nas e Inflama√ß√£o</div>
            <div class="exam-row"><div>Albumina S√©rica + PCR</div><input type="text" id="alb_pcr"><span>Alb >3.5 g/dL | PCR <0.5</span></div>
            <div class="exam-row"><div>Prote√≠nas Totais e Fra√ß√µes</div><input type="text" id="prot_totais"><span>6.0-8.0 g/dL</span></div>
            
            <div class="cat">Metab√≥lico e Renal</div>
            <div class="exam-row"><div>Glicemia Jejum / HbA1c</div><input type="text" id="glic"><span>70-99 mg/dL | HbA1c <6.5%</span></div>
            <div class="exam-row"><div>Ureia / Creatinina</div><input type="text" id="renal"><span>U:15-45 | C:0.6-1.3 mg/dL</span></div>
            
            <div class="cat">Lipograma</div>
            <div class="exam-row"><div>Colesterol (T/H/L/V)</div><input type="text" id="colest"><span>CT <190 | HDL >40</span></div>
            <div class="exam-row"><div>Triglicer√≠deos</div><input type="text" id="trig"><span><150 mg/dL</span></div>
            
            <div class="cat">Vitaminas e Minerais</div>
            <div class="exam-row"><div>Vit D / B12 / √Åc. F√≥lico</div><input type="text" id="vits"><span>D >30ng | B12 >200pg</span></div>
            <div class="exam-row"><div>Ferritina / Ferro S√©rico</div><input type="text" id="ferro"><span>F:20-250 ng/mL</span></div>
            <div class="exam-row"><div>Eletr√≥litos (Na, K, P, Ca, Mg, Zn)</div><input type="text" id="eletro"><span>Na:135-145 | K:3.5-5.0</span></div>
            
            <div class="cat">F√≠gado e Tireoide</div>
            <div class="exam-row"><div>TGO / TGP / TSH</div><input type="text" id="hepato"><span>TSH: 0.4-4.5 mIU/L</span></div>
            
            <div class="cat">Urina</div>
            <div class="exam-row"><div>EAS (Urina Tipo 1)</div><input type="text" id="eas"><span>pH: 5.0-7.0</span></div>
        </form>

        <button class="btn-save" style="margin-top:20px" onclick="guardarExames()">üíæ Guardar Exames</button>
    </div>

    <script src="app.js"></script>
    <script>
        function carregarNomes() {
            const b = obterBanco();
            const s = document.getElementById("selResidente");
            Object.keys(b).forEach(n => { s.innerHTML += `<option value="${n}">${n}</option>`; });
        }
        function guardarExames() {
            const n = document.getElementById("selResidente").value;
            if(!n) return alert("Selecione o residente");
            const dados = { data: document.getElementById("dataExame").value };
            document.querySelectorAll("#formExames input").forEach(i => dados[i.id] = i.value);
            salvarExame(n, dados);
            alert("Exames guardados com sucesso!");
        }
    </script>
</body>
</html>
