<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <title>Exames - Lar Padre Euclides</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="carregar()">
    <div class="navbar"><div class="nav-container"><img src="logo.png" class="nav-logo">
        <div class="nav-links"><a href="index.html" class="nav-link home-btn">üè† In√≠cio</a><a href="exames-laboratoriais.html" class="nav-link">üß™ Exames</a><a href="ficha-completa.html" class="nav-link">üìÇ Ficha</a></div>
    </div></div>

    <div class="container">
        <header><h1>Prontu√°rio Laboratorial</h1><p id="perfilNome" style="color:var(--secondary-color); font-weight:bold;"></p></header>
        <div class="grid">
            <div><label>Residente</label><select id="selRes" onchange="ref()"><option value="">-- Escolher --</option></select></div>
            <div><label>Data</label><input type="date" id="data"></div>
        </div>

        <form id="fEx">
            <div class="cat-header">Hemograma e Metabolismo</div>
            <div class="exam-row"><div>Hemoglobina (g/dL)</div><input type="text" id="hgb"><span class="ref-text" id="r_hgb">--</span></div>
            <div class="exam-row"><div>Glicemia / HbA1c</div><input type="text" id="gli"><span class="ref-text">70-99 | <6.5%</span></div>
            
            <div class="cat-header">Prote√≠nas e Renal</div>
            <div class="exam-row"><div>Albumina / PCR</div><input type="text" id="alb"><span class="ref-text">> 3.5 | < 0.5</span></div>
            <div class="exam-row"><div>Ureia / Creatinina</div><input type="text" id="ren"><span class="ref-text" id="r_cre">--</span></div>

            <div class="cat-header">Perfil Lip√≠dico e Vitaminas</div>
            <div class="exam-row"><div>Colesterol T / HDL / LDL</div><input type="text" id="lip"><span class="ref-text">CT < 190 | HDL > 40</span></div>
            <div class="exam-row"><div>Vit D / B12 / Folato</div><input type="text" id="vit"><span class="ref-text">D > 30ng | B12 > 200pg</span></div>
            
            <div class="cat-header">Minerais e Outros</div>
            <div class="exam-row"><div>Eletr√≥litos / Zinco</div><input type="text" id="min"><span>Na, K, P, Ca, Mg, Zn</span></div>
            <div class="exam-row"><div>TGO / TGP / TSH</div><input type="text" id="out"><span>Fun√ß√£o Hep√°tica/Tireoide</span></div>
            <div class="exam-row"><div>EAS (Urina Tipo 1)</div><input type="text" id="eas"><span>Densit./pH/Sedim.</span></div>
        </form>
        <button class="btn-save" onclick="salvarExameBtn()">üíæ GUARDAR EXAMES</button>
    </div>
    <script src="app.js"></script>
    <script>
        function carregar() { const b = obterBanco(); const s = document.getElementById("selRes"); Object.keys(b).sort().forEach(n => s.innerHTML += `<option value="${n}">${n}</option>`); }
        function ref() {
            const n = document.getElementById("selRes").value; if(!n) return;
            const p = obterBanco()[n].perfil;
            document.getElementById("perfilNome").innerText = `Paciente: ${n} | Sexo: ${p.sexo}`;
            if(p.sexo === 'M') {
                document.getElementById("r_hgb").innerText = "Ref: 13.5-17.5 g/dL";
                document.getElementById("r_cre").innerText = "Ref: 0.7-1.3 mg/dL";
            } else {
                document.getElementById("r_hgb").innerText = "Ref: 12.0-15.5 g/dL";
                document.getElementById("r_cre").innerText = "Ref: 0.6-1.1 mg/dL";
            }
        }
        function salvarExameBtn() {
            const n = document.getElementById("selRes").value; const d = { data: document.getElementById("data").value };
            document.querySelectorAll("#fEx input").forEach(i => d[i.id] = i.value);
            salvarExame(n, d); alert("Exames guardados!");
        }
    </script>
</body>
</html>
