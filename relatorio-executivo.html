<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Relatório Executivo</title>
<link rel="stylesheet" href="style.css">
<script src="app.js"></script>
</head>
<body>

<div class="navbar">
    <div class="navbar-inner">
        <a href="index.html">Home</a>
        <a href="ficha-completa.html">Ficha</a>
        <a href="exames-laboratoriais.html">Exames</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="relatorio-executivo.html">Relatório</a>
        <a href="metodologia.html">Metodologia</a>
    </div>
</div>

<div class="container">
<h2>Relatório Executivo - Direção</h2>

<div id="relatorio"></div>

<button onclick="window.print()">Gerar PDF</button>

</div>

<script>

function gerarRelatorio(){

    const banco = obterBanco();
    let total = 0;
    let risco = 0;

    for(let nome in banco){

        const avals = banco[nome].avaliacoes;
        if(avals.length>0){

            const ultima = avals[avals.length-1];
            total++;

            if(ultima.icn >= 3){
                risco++;
            }
        }
    }

    const percentual = total>0 ? ((risco/total)*100).toFixed(1) : 0;

    document.getElementById("relatorio").innerHTML = `
        <p>Total avaliados: ${total}</p>
        <p>Em risco clínico: ${risco}</p>
        <p>Percentual institucional: ${percentual}%</p>
    `;
}

gerarRelatorio();

</script>

</body>
</html>
